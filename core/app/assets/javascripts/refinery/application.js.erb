//= require jquery.min
//= require jquery_ujs
//= require vendor/jquery-ui.min
//= require vendor/jquery.iframe-transport
//= require turbolinks
//= require vendor/nestedsortables

<% ::Refinery::Core.admin_javascripts.each do |js| %>
<%= require_asset js %>
<% end %>

$(function () {
    var doc = $(document),
        ui = new refinery.admin.UserInterface().init($('#wrapper'));
        // =t=
    $.ajaxSettings.dataType = 'JSON';

    function reload () {
        ui.reload($('#wrapper', false));
        refinery.spinner.off();
    }

    doc.on('page:fetch', function () {
        $('.ui-dialog').remove();
        refinery.spinner.on();
    });

    doc.on('page:load', reload);
    doc.on('page:restore', reload);
    //new refinery.admin.ResourcesDialog().init().open();
});
