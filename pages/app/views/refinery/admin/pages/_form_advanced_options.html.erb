<%= render '/refinery/admin/form_advanced_options_menu', f: f %>
<div id="more-options" class="js-hide clearfix">
  <div class="hemisquare">
    <h2><%= t('.page_options') %></h2>

    <% if @page.plugin_page_id.blank? -%>
    <div class="field">
      <%= refinery_form_field f, :select, :parent_id,
                  options: parent_id_nested_set_options(@page),
                  include_blank: true,
                  label: t('.parent_page'),
                  help: t('.parent_page_help'),
                  html: { class: 'widest' } %>
    </div>
    <% end %>

    <% if (title_part = @page.parts.select {|p| p.title == :title }.first) %>
      <% part_index = @page.parts.index {|p| p.title == :title } %>
      <div class="field" id="<%= title_part.to_param %>">
        <%= label_tag "page[parts_attributes][#{part_index}][body]", t('.content_part_title') %>
        <div class="js-hide">
          <%= hidden_field_tag "page[parts_attributes][#{part_index}][active]", 0 %>
          <%= check_box_tag "page[parts_attributes][#{part_index}][active]", 1, title_part.active, class: 'part-active' %>
          <%= label_tag "page[parts_attributes][#{part_index}][active]",
                        t('active', scope: 'refinery.admin.pages.parts'), class: 'stripped' %>
          <%= hidden_field_tag "page[parts_attributes][#{part_index}][position]", title_part.position, class: 'part-position' %>
          <%= hidden_field_tag "page[parts_attributes][#{part_index}][title]", title_part.title if title_part.new_record? %>
        </div>
        <%= text_field_tag "page[parts_attributes][#{part_index}][body]", title_part.body,
                    class: 'widest',
                    placeholder: t('.content_part_title_placeholder') %>
      </div>
    <% end -%>

    <% if @page.plugin_page_id.blank? -%>
    <div class="field">
      <%= refinery_form_field f, :check_box, :skip_to_first_child, label: true, help: true  -%>
      <%= f.label :skip_to_first_child, t('.skip_to_first_child_label'), class: 'stripped' %>
    </div>

    <div class="field">
      <%= refinery_form_field f, :text_field, :link_url,
                  label: true, help: true, html: { class: 'widest' } -%>
    </div>
    <% end %>

    <div class="field">
      <%= refinery_form_field f, :check_box, :show_in_menu, label: t('.show_in_menu_title'), help: true  -%>
      <%= f.label :show_in_menu, t('.show_in_menu_description'), class: 'stripped' %>
    </div>

  </div>

  <%= render 'form_advanced_options_seo', f: f %>
</div>
